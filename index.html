<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
  <meta charset="utf-8">
  <!--[if IE]>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">``
  <![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>網頁標題. Maximum length 60-70 characters</title>
  <meta name="description" content="網頁簡介. No longer than 155 characters." />
  <meta name="keywords" content="關鍵字,META,SEO">
  <meta name="author" content="Tiya" >
  <meta name="copyright" content="Tiya版權所有" >

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@publisher_handle ,Twitter 的帳號">
  <meta name="twitter:creator" content="@author_handle 作者">

  <!--Fb Open Graph data -->
  <meta property="og:title" content="網頁標題" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="網址" />
  <meta property="og:image" content=" http://example.com/image.jpg" />
  <meta property="og:description" content="網頁簡介" />
  <meta property="og:site_name" content="Site Name, i.e. Moz" />
  <meta property="article:tag" content="Article Tag" />

  <link rel="stylesheet" href="css/index.min.css">

<!-- <link rel="stylesheet" type="text/css" href="css/style.css" /> -->

  <!-- 讓ie8以下支援html5語意標籤 -->
  <!--[if lt IE 9]>
  <![endif]-->
  <!-- 讓ie6~8支援CSS3偽類和屬性選擇器(:first-child) -->
  <!--[if (gte IE 6)&(lte IE 8)]>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->

<!--     <style type="text/css">

      @keyframes start {
        from {
          transform: scale(0);
        }
        to {
          transform: scale(1);
        }
      }


      @-webkit-keyframes start {
        from {
          -webkit-transform: scale(0);
        }
        to {
          -webkit-transform: scale(1);
        }
      }

      .free-wall .cell[data-state="init"] {
        display: none;
      }

      .free-wall .cell[data-state="start"]  {
        display: block;
        animation: start 0.5s;
        -webkit-animation: start 0.5s;
      }

      .free-wall .cell[data-state="move"]  {
        transition: top 0.5s, left 0.5s, width 0.5s, height 0.5s;
        -webkit-transition: top 0.5s, left 0.5s, width 0.5s, height 0.5s;
      }

    </style> -->

  </head>
  <body>
  <!-- loading -->
  <div class="loading">
    <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
      <path fill="#000" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(80 25 25)">
        <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform>
        </path>
  </svg>
  </div>
  <div class="warpper">
    <div class="header">
      <header>
        <div class="title">
          <h1>法國巴黎</h1>
          <h2>2016/10/05~2016/10/12</h2>
        </div>
      </header>
      <div id="scene">
        <div class="layer" data-depth="0.20">
          <picture>
           <!--[if IE 9]><video style="display: none;"><![endif]-->
            <source media="(max-width: 480px)" srcset="https://c5.staticflickr.com/6/5341/30207289940_e04d118701.jpg" >
            <source media="(max-width: 720px)" srcset="https://c5.staticflickr.com/6/5341/30207289940_e04d118701_c.jpg" >
            <source media="(max-width: 1024px)" srcset="https://c5.staticflickr.com/6/5341/30207289940_e04d118701_b.jpg">
            <source media="(min-width: 1024px)" srcset="https://c5.staticflickr.com/6/5341/30207289940_71b5ae2597_h.jpg">
            <!--[if IE 9]><video style="display: none;"><![endif]-->
            <img src="https://c5.staticflickr.com/6/5341/30207289940_e04d118701_b.jpg">
          </picture>
        </div>
      </div>
      <div class="header-right"><span>往左拖曳 ></span></div>
    </div>
    <div class="rightbox">
      <!-- 左右跑馬燈 -->
      <div class="news">
        <div class="title">NEWS</div>
        <div class="marquee">
          <a href=""><span>跑馬燈及footer轉場動畫</span></a>
          <a href=""><span>json陣列資料結合瀑布流</span></a>
          <a href=""><span>loading效果及滑鼠滾輪綁定左右捲動</span></a>
          <a href=""><span>主要橫向瀑布流版型建置及上下方定點及跑馬燈效果</span></a>
        </div>
      </div>
      <!-- 瀑布流 -->
      <div class="freewall">
        <div class="freewall-wrapper">
          <div class="freewallbox1 grid"></div>
          <div class="freewallbox2 grid"></div>
         </div>
      </div>

<!--       <main id="freewall" class="grid">
        <div class="item" item_id="1">
          <span class="number">1</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="3">
          <span class="number">3</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item  item-height2" item_id="5">
          <span class="number">5</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2 item-height2" item_id="7">
          <span class="number">7</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item " item_id="9">
          <span class="number">9</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2" item_id="11">
          <span class="number">11</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2" item_id="13">
          <span class="number">13</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="15">
          <span class="number">15</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="17">
          <span class="number">17</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="19">
          <span class="number">19</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-height2" item_id="21">
          <span class="number">21</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="23">
          <span class="number">23</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="25">
          <span class="number">25</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="27">
          <span class="number">27</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2  item-height2" item_id="29">
          <span class="number">29</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2 item-height2" item_id="7">
          <span class="number">7</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item " item_id="9">
          <span class="number">9</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2" item_id="11">
          <span class="number">11</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2" item_id="13">
          <span class="number">13</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="15">
          <span class="number">15</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="17">
          <span class="number">17</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="19">
          <span class="number">19</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-height2" item_id="21">
          <span class="number">21</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="23">
          <span class="number">23</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="25">
          <span class="number">25</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item" item_id="27">
          <span class="number">27</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
        <div class="item item-width2  item-height2" item_id="29">
          <span class="number">29</span>
          <img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" />
        </div>
       </main> -->
      <footer>
        footer
      </footer>
    </div>

  </div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <!-- 滾輪事件 -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js"></script>
  <!-- 視差效果 -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/parallax/2.1.3/jquery.parallax.min.js"></script>
  <!-- 圖片rwd相容 -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script>
  <!-- 圖片延遲仔入 -->
  <script type="text/javascript" src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>
  <!-- 跑馬燈 -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.Marquee/1.3.94/jquery.marquee.min.js"></script>
  <!-- 瀑布流 -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/freewall/1.0.5/freewall.min.js"></script>


<!--   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.1/isotope.pkgd.min.js"></script>
  <script type="text/javascript" src="https://npmcdn.com/isotope-masonry-horizontal@2.0.0/masonry-horizontal.js"></script> -->

  <script type="text/javascript">
    // loading
    $(window).on('load', function() {
         $('.loading').delay(1000).fadeOut('200', function() {
           $(this).remove();
         });
     });
    $(function() {


      var _body = $('body,html');
      // 滾動

    // transform: translate3d(-26px, 0px, 0px);
    // transform-style: preserve-3d;

       var view_x = 0;
       var freewall_x = 0;
       var onright = false;
       var topanddown = $('.rightbox,footer');
      $('body').on('mousewheel', function(e) {
        // console.log(onright);
        if(!onright){
          console.log('1.'+view_x);
          view_x = view_x + (e.deltaY*-2);
          if(view_x >= 0 && view_x <= 50){
            // 上下進入
            topanddown.removeClass('show');
            $('.warpper').css({
              'transform': 'translateX('+ -view_x +'%)',
            });

          }else if(view_x < 0){
            view_x = 0;
          }else if(view_x > 50){
            view_x = 50;
            onright = true;
          }
        }else{
          // 上下退出
          topanddown.addClass('show');
          // console.log('2.'+freewall_x);
          freewall_x = freewall_x + (e.deltaY*-2);
          if(freewall_x >= 0){
            $('.freewall-wrapper').css({
              'transform': 'translateX('+ -freewall_x +'%)',
            });
          }else if(freewall_x < 0){
            freewall_x = 0;
            onright = false;
          }
        }


      });

      // 視差
        $('#scene').parallax({
          invertX: true,
          limitX: false,
          limitY: 0,
        });

        // 跑馬燈
        $('.marquee').marquee({
            pauseOnHover: true,
            //speed in milliseconds of the marquee
            duration: 15000,
            //gap in pixels between the tickers
            gap: 100,
            //time in milliseconds before the marquee will start animating
            delayBeforeStart: 0,
            //'left' or 'right'
            direction: 'left',
            //true or false - should the marquee be duplicated to show an effect of continues flow
            duplicated: true
        });

        // 瀑布流
        // var box_size = [{
        //   'num20':['size1','size2','size3','size1','size1','size4','size1','size1','size1','size3','size2','size1','size1','size1','size4','size3','size3','size2','size1','size1']},{
        //   'num16':['size1','size2','size3','size1','size1','size4','size1','size1','size1','size3','size2','size1','size1','size1','size4','size3']},{,{
        //   'num14':['size1','size2','size3','size1','size1','size4','size1','size1','size1','size3','size2','size1','size1','size1']},{,{
        //   'num11':['size1','size2','size3','size1','size1','size4','size1','size1','size1','size3','size2']},{
        //   'num7':['size1','size2','size3','size1','size1','size4','size1']},{
        //   'num4':['size1','size1','size3','size2']},{
        //   'num3':['size1','size1','size1']},{
        //   'num2':['size4','size3']}];
        var box_size = ['size1','size2','size3','size1','size1','size4','size1','size1','size1','size3','size2','size1','size1','size1','size4','size3','size3','size2','size1','size1'];
        var webdata = [{
          'class':'picbox',
          'pic_url':'https://c3.staticflickr.com/6/5542/30469055266_4b399c48ff_c.jpg',
          'title':'標題',
          'content':'內文'

        },{
          'class':'link',
          'pic_url':'https://c2.staticflickr.com/9/8645/30419102961_a20a92a178_c.jpg',
          'a_href':'https://flic.kr/p/Nm2Rwr',
        },{
          'class':'picbox',
          'pic_url':'https://c3.staticflickr.com/6/5546/30469056226_f249b5c605_c.jpg',
          'title':'標題',
          'content':'內文'
        },{
          'class':'link',
          'pic_url':'https://c3.staticflickr.com/6/5545/29875141434_6f7d3e1c68_c.jpg',
          'a_href':'https://flic.kr/p/MvXUHq',
        },{
          'class':'picbox',
          'pic_url':'https://c3.staticflickr.com/6/5746/30469057426_f56bd4fd7f_c.jpg',
          'title':'標題',
          'content':'內文'
        },{
          'class':'picbox',
          'pic_url':'https://c5.staticflickr.com/9/8594/30469058396_5d0d9fa5af_c.jpg',
          'title':'標題',
          'content':'內文'
        },{
          'class':'link',
          'pic_url':'https://c8.staticflickr.com/6/5759/30419104271_e366ec91d9_c.jpg',
          'a_href':'https://flic.kr/p/Nm2RV2',
        },{
          'class':'link',
          'pic_url':'https://c8.staticflickr.com/6/5509/29873483503_65dfc78961_c.jpg',
          'a_href':'https://flic.kr/p/MvPpSp',
        },{
          'class':'picbox',
          'pic_url':'https://c3.staticflickr.com/6/5772/30469059506_383752a129_c.jpg',
          'title':'標題',
          'content':'內文'
        },{
          'class':'link',
          'pic_url':'https://c6.staticflickr.com/6/5737/30419105141_07fb91bd30_c.jpg',
          'a_href':'https://flic.kr/p/Nm2Sb2',
        },{
          'class':'picbox',
          'pic_url':'https://c5.staticflickr.com/6/5341/30207289940_71b5ae2597_h.jpg',
          'title':'標題',
          'content':'內文'
        }];
      var data_n = 0;
      var n = webdata.length;
      var freewallbox1 = $('.freewallbox1');
      var freewallbox2 = $('.freewallbox2');
      console.log(n);
      $.each(box_size,function(i,item){

        if(n<20){
          if(data_n == n){
            data_n = 0;
          }
          console.log(i+';'+data_n);
          if(webdata[data_n].class == 'picbox'){
            freewallbox1.append('<div class="brick '+item+'"><span class="pic" style="background-image:url('+webdata[data_n].pic_url+');"></span></div>');
          }else if(webdata[data_n].class == 'link'){
            freewallbox1.append('<a class="brick '+item+'" href="'+webdata[data_n].a_href+'" target="_blank"><span class="pic" style="background-image:url('+webdata[data_n].pic_url+');"></span></a>');
          }

          data_n++;
        }else{

        }
      });
      // $.each(webdata, function(i, item){

      //    var n = webdata.length;
      //     console.log(n);

      //    $('.freewallbox1').append('<div class="brick size1" style="background-image:url('+item.pic_url+');"></div>');
      // });

      // $("#freewall .brick").each(function(index, item) {
      //   item.style.backgroundImage =  "url(i/photo/" + (++index) + ".jpg)";
      // });

        var wall = new Freewall(".freewallbox1");
        wall.reset({
          selector: '.brick',
          cellW: 190,
          cellH: 190,
          gutterY: 2,
          gutterX: 2,
          onResize: function() {
            wall.fitHeight($(window).height() - 140);
          }
        });

        // caculator height for IE7;
        wall.fitHeight($(window).height() - 140);
        $(window).trigger("resize");


        // var $grid = $('.grid').imagesLoaded( function() {
        //   // init Isotope after all images have loaded
        //   $grid.isotope({
        //           layoutMode: 'masonryHorizontal',
        //           itemSelector: '.item',
        //           masonryHorizontal: {
        //             rowHeight: 197,
        //           },
        //          // filter items with odd numbers
        //           filter: function() {
        //             var number = $( this ).attr('item_id');
        //             return parseInt( number, 10 ) ;
        //           },
        //           // sort by number
        //           sortBy: 'number',
        //           getSortData: {
        //             'number': '.number parseInt'
        //           }
        //         });
        // });

        // // var str='<div class="item item-height2"><img src="https://c3.staticflickr.com/1/361/19761217962_a3570fe583_c.jpg" /></div>';
        // var isOpen = false;
        // $('.grid').on('click','.item',function(){
        //   var n = parseInt($(this).attr('item_id'))+1;
        //   console.log(isOpen);
        //   console.log(n-1);

        //   if (isOpen) {
        //     var remove_item = $('.item-open') ;
        //     $grid.isotope( 'remove', remove_item );
        //   } else {
        //     var str='<div class="item item-open" item_id="'+n+'"><span class="number">'+n+'</span><h2>標題標題</h2><p>內文內文內文</p></div>';
        //     console.log(str);
        //     // var $items = getItemElement().add( getItemElement() ).add( getItemElement() );
        //     // // insert new elements
        //    // create new item elements
        //     var $items = $(str);
        //     // insert new elements
        //     $grid.isotope( 'insert', $items );
        //   }
        //   // trigger layout
        //   $grid.isotope('layout');
        //   // set flag
        //   isOpen = !isOpen;


        //});
    });
  </script>
  </body>
</html>
